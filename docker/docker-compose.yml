###############################################################################
#                          Generated on phpdocker.io                          #
###############################################################################

mysql-server:
  image:  mysql/mysql-server:latest
  container_name: mysql-server
  volumes:
    - mysql_data:/var/lib/mysql
  environment:
    MYSQL_ROOT_PASSWORD: 'mysqlrootpassword'
    MYSQL_ROOT_HOST: '%'
  ports:
    - "3306:3306"


mds-memcached:
  image: phpdockerio/memcached:latest
  container_name: mds-memcached

#mds-rabbitmq:
#  image: rabbitmq:latest
#  container_name: mds-rabbitmq
#  hostname: "mds-rabbitmq"
#  environment:
#    RABBITMQ_ERLANG_COOKIE: "SWQOKODSQALRPCLNMEQG"
#    RABBITMQ_DEFAULT_USER: "rabbitmq"
#    RABBITMQ_DEFAULT_PASS: "rabbitmq"
#    RABBITMQ_DEFAULT_VHOST: "/"
#  ports:
#    - "15672:15672"
#    - "5672:5672"
#  labels:
#    NAME: "mds-rabbitmq"
#  volumes:
#      - "./rabbitmq/enabled_plugins:/etc/rabbitmq/enabled_plugins"

#mds-mongo:
#  image: mongo:latest
#  container_name: mds-mongo
#  ports:
#     - "27018:27017"

mds-php-fpm:
  build: .
  dockerfile: php-fpm/Dockerfile
  container_name: mds-php-fpm
  volumes:
    - ..:/var/www/mds
    - ./php-fpm/php-ini-overrides.ini:/etc/php/7.1/fpm/conf.d/99-overrides.ini
    - ./php-fpm/php-ini-overrides.ini:/etc/php/7.1/cli/conf.d/99-overrides.ini
    - ./php-fpm/start.sh:/start.sh
    - /tmp/:/tmp/
  links:
    - mds-memcached
    - mysql-server
#    - mds-rabbitmq
#  env_file:
#    - ./php-fpm/xdebug-cli.env

mds-nginx:
  image: phpdockerio/nginx:latest
  container_name: mds-nginx
  volumes:
      - ..:/var/www/mds
      - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf
  ports:
   - "80:80"
  links:
   - mds-php-fpm